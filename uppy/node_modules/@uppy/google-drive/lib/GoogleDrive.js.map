{"version":3,"names":["UIPlugin","Provider","h","packageJson","DriveProviderViews","locale","GoogleDrive","constructor","uppy","opts","id","title","initPlugin","icon","focusable","width","height","viewBox","fillRule","fill","d","provider","companionUrl","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","defaultLocale","i18nInit","i18n","onFirstRender","bind","render","install","view","loadAllFiles","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","VERSION","version"],"sources":["GoogleDrive.jsx"],"sourcesContent":["import { UIPlugin } from '@uppy/core'\nimport { Provider } from '@uppy/companion-client'\nimport { h } from 'preact'\n\nimport packageJson from '../package.json'\nimport DriveProviderViews from './DriveProviderViews.js'\nimport locale from './locale.js'\n\nexport default class GoogleDrive extends UIPlugin {\n  static VERSION = packageJson.version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'GoogleDrive'\n    this.title = this.opts.title || 'Google Drive'\n    Provider.initPlugin(this, opts)\n    this.title = this.opts.title || 'Google Drive'\n    this.icon = () => (\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        width=\"32\"\n        height=\"32\"\n        viewBox=\"0 0 32 32\"\n      >\n        <g fillRule=\"nonzero\" fill=\"none\">\n          <path d=\"M6.663 22.284l.97 1.62c.202.34.492.609.832.804l3.465-5.798H5c0 .378.1.755.302 1.096l1.361 2.278z\" fill=\"#0066DA\" />\n          <path d=\"M16 12.09l-3.465-5.798c-.34.195-.63.463-.832.804l-6.4 10.718A2.15 2.15 0 005 18.91h6.93L16 12.09z\" fill=\"#00AC47\" />\n          <path d=\"M23.535 24.708c.34-.195.63-.463.832-.804l.403-.67 1.928-3.228c.201-.34.302-.718.302-1.096h-6.93l1.474 2.802 1.991 2.996z\" fill=\"#EA4335\" />\n          <path d=\"M16 12.09l3.465-5.798A2.274 2.274 0 0018.331 6h-4.662c-.403 0-.794.11-1.134.292L16 12.09z\" fill=\"#00832D\" />\n          <path d=\"M20.07 18.91h-8.14l-3.465 5.798c.34.195.73.292 1.134.292h12.802c.403 0 .794-.11 1.134-.292L20.07 18.91z\" fill=\"#2684FC\" />\n          <path d=\"M23.497 12.455l-3.2-5.359a2.252 2.252 0 00-.832-.804L16 12.09l4.07 6.82h6.917c0-.377-.1-.755-.302-1.096l-3.188-5.359z\" fill=\"#FFBA00\" />\n        </g>\n      </svg>\n    )\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'drive',\n      pluginId: this.id,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameGoogleDrive')\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new DriveProviderViews(this, {\n      provider: this.provider,\n      loadAllFiles: true,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder('root'),\n    ])\n  }\n\n  render (state) {\n    return this.view.render(state)\n  }\n}\n"],"mappings":"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"}